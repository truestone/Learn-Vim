# Ch06. 삽입 모드

삽입 모드는 많은 텍스트 편집기의 기본 모드입니다. 이 모드에서는 입력하는 대로 텍스트가 표시됩니다.

하지만 배울 것이 많지 않다는 의미는 아닙니다. Vim의 삽입 모드에는 많은 유용한 기능이 포함되어 있습니다. 이 장에서는 Vim의 이러한 삽입 모드 기능을 사용하여 타이핑 효율성을 향상시키는 방법을 배웁니다.

## 삽입 모드로 들어가는 방법

일반 모드에서 삽입 모드로 들어가는 방법은 여러 가지가 있습니다. 그중 일부는 다음과 같습니다:

```
i    커서 앞에 텍스트 삽입
I    줄의 공백이 아닌 첫 문자 앞에 텍스트 삽입
a    커서 뒤에 텍스트 추가
A    줄 끝에 텍스트 추가
o    커서 아래에 새 줄을 시작하고 텍스트 삽입
O    커서 위에 새 줄을 시작하고 텍스트 삽입
s    커서 아래 문자를 삭제하고 텍스트 삽입
S    현재 줄을 삭제하고 텍스트 삽입, "cc"와 동의어
gi   마지막 삽입 모드가 중지된 동일한 위치에 텍스트 삽입
gI   줄의 시작(1열)에 텍스트 삽입
```

소문자/대문자 패턴에 주목하세요. 각 소문자 명령어에는 대문자 상대가 있습니다. 처음이라면 위의 전체 목록을 기억하지 못해도 걱정하지 마세요. `i`와 `o`로 시작하세요. 시작하기에 충분할 것입니다. 시간이 지남에 따라 점차 더 많이 배우세요.

## 삽입 모드를 나가는 다른 방법들

삽입 모드에 있는 동안 일반 모드로 돌아가는 몇 가지 다른 방법이 있습니다:

```
<Esc>     삽입 모드를 종료하고 일반 모드로 이동
Ctrl-[    삽입 모드를 종료하고 일반 모드로 이동
Ctrl-C    Ctrl-[ 및 <Esc>와 같지만, 축약형을 확인하지 않음
```

저는 `<Esc>` 키가 너무 멀리 있어서 컴퓨터의 `<Caps-Lock>`을 `<Esc>`처럼 작동하도록 매핑합니다. 빌 조이의 ADM-3A 키보드(Vi 제작자)를 검색해보면, `<Esc>` 키가 최신 키보드처럼 왼쪽 상단 멀리 있는 것이 아니라 `q` 키 왼쪽에 있다는 것을 알 수 있습니다. 이것이 제가 `<Caps lock>`을 `<Esc>`에 매핑하는 것이 합리적이라고 생각하는 이유입니다.

Vim 사용자들이 하는 또 다른 일반적인 관례는 삽입 모드에서 `<Esc>`를 `jj`나 `jk`에 매핑하는 것입니다. 이 옵션을 선호한다면 vimrc 파일에 다음 줄 중 하나(또는 둘 다)를 추가하세요.

```
inoremap jj <Esc>
inoremap jk <Esc>
```

## 삽입 모드 반복하기

삽입 모드로 들어가기 전에 횟수 매개변수를 전달할 수 있습니다. 예를 들어:

```
10i
```

"hello world!"를 입력하고 삽입 모드를 종료하면, Vim은 텍스트를 10번 반복합니다. 이것은 모든 삽입 모드 방법(`예: 10I`, `11a`, `12o`)에서 작동합니다.

## 삽입 모드에서 덩어리 삭제하기

타이핑 실수를 했을 때, `<Backspace>`를 반복적으로 누르는 것은 번거로울 수 있습니다. 일반 모드로 가서 실수를 삭제하는 것이 더 합리적일 수 있습니다. 삽입 모드에 있는 동안 한 번에 여러 문자를 삭제할 수도 있습니다.

```
Ctrl-h    한 문자 삭제
Ctrl-w    한 단어 삭제
Ctrl-u    전체 줄 삭제
```

## 레지스터에서 삽입하기

Vim 레지스터는 나중에 사용할 텍스트를 저장할 수 있습니다. 삽입 모드에 있는 동안 명명된 레지스터에서 텍스트를 삽입하려면, `Ctrl-R`과 레지스터 기호를 입력하세요. 사용할 수 있는 기호는 많지만, 이 섹션에서는 명명된 레지스터(a-z)만 다루겠습니다.

실제로 보려면, 먼저 단어를 a 레지스터에 복사해야 합니다. 아무 단어에나 커서를 이동하세요. 그런 다음 다음을 입력하세요:

```
"ayiw
```

- `"a`는 Vim에게 다음 작업의 대상이 a 레지스터로 갈 것임을 알려줍니다.
- `yiw`는 내부 단어를 복사합니다. 복습을 위해 Vim 문법에 대한 장을 검토하세요.

이제 a 레지스터에는 방금 복사한 단어가 포함되어 있습니다. 삽입 모드에 있는 동안, a 레지스터에 저장된 텍스트를 붙여넣으려면:

```
Ctrl-R a
```

Vim에는 여러 유형의 레지스터가 있습니다. 나중 장에서 더 자세히 다루겠습니다.

## 스크롤하기

삽입 모드 안에서 스크롤할 수 있다는 것을 알고 계셨나요? 삽입 모드에 있는 동안 `Ctrl-X` 하위 모드로 가면 추가 작업을 수행할 수 있습니다. 스크롤도 그중 하나입니다.

```
Ctrl-X Ctrl-Y    위로 스크롤
Ctrl-X Ctrl-E    아래로 스크롤
```

## 자동 완성

위에서 언급했듯이, 삽입 모드에서 `Ctrl-X`를 누르면 Vim은 하위 모드로 들어갑니다. 이 삽입 모드 하위 모드에 있는 동안 텍스트 자동 완성을 수행할 수 있습니다. [intellisense](https://code.visualstudio.com/docs/editor/intellisense)나 다른 언어 서버 프로토콜(LSP)만큼 좋지는 않지만, 기본적으로 사용할 수 있는 기능치고는 매우 유능한 기능입니다.

시작하기에 유용한 몇 가지 자동 완성 명령어는 다음과 같습니다:

```
Ctrl-X Ctrl-L	   전체 줄 삽입
Ctrl-X Ctrl-N	   현재 파일에서 텍스트 삽입
Ctrl-X Ctrl-I	   포함된 파일에서 텍스트 삽입
Ctrl-X Ctrl-F	   파일 이름 삽입
```

자동 완성을 트리거하면 Vim은 팝업 창을 표시합니다. 팝업 창을 위아래로 탐색하려면 `Ctrl-N`과 `Ctrl-P`를 사용하세요.

Vim에는 `Ctrl-X` 하위 모드를 포함하지 않는 두 가지 자동 완성 단축키도 있습니다:

```
Ctrl-N             다음 단어 일치 찾기
Ctrl-P             이전 단어 일치 찾기
```

일반적으로 Vim은 자동 완성 소스를 위해 사용 가능한 모든 버퍼의 텍스트를 살펴봅니다. "Chocolate donuts are the best"라는 줄이 있는 열린 버퍼가 있는 경우:
- "Choco"를 입력하고 `Ctrl-X Ctrl-L`을 하면, 전체 줄을 일치시키고 출력합니다.
- "Choco"를 입력하고 `Ctrl-P`를 하면, "Chocolate" 단어를 일치시키고 출력합니다.

자동 완성은 Vim에서 방대한 주제입니다. 이것은 빙산의 일각에 불과합니다. 더 배우려면 `:h ins-completion`을 확인하세요.

## 일반 모드 명령어 실행하기

Vim이 삽입 모드에 있는 동안 일반 모드 명령어를 실행할 수 있다는 것을 알고 계셨나요?

삽입 모드에 있는 동안 `Ctrl-O`를 누르면, 삽입-일반 하위 모드가 됩니다. 왼쪽 하단의 모드 표시기를 보면, 보통 `-- INSERT --`가 표시되지만, `Ctrl-O`를 누르면 `-- (insert) --`로 바뀝니다. 이 모드에서는 *하나의* 일반 모드 명령어를 수행할 수 있습니다. 할 수 있는 몇 가지 작업은 다음과 같습니다:

**중앙 정렬 및 점프**

```
Ctrl-O zz       창 중앙 정렬
Ctrl-O H/M/L    창 상단/중간/하단으로 점프
Ctrl-O 'a       마크 a로 점프
```

**텍스트 반복**

```
Ctrl-O 100ihello    "hello" 100번 삽입
```

**터미널 명령어 실행**

```
Ctrl-O !! curl https://google.com    curl 실행
Ctrl-O !! pwd                        pwd 실행
```

**더 빠른 삭제**

```
Ctrl-O dtz    현재 위치에서 "z" 문자까지 삭제
Ctrl-O D      현재 위치에서 줄 끝까지 삭제
```

## 현명하게 삽입 모드 배우기

저처럼 다른 텍스트 편집기에서 왔다면, 삽입 모드에 머무르고 싶은 유혹이 있을 수 있습니다. 하지만 텍스트를 입력하지 않을 때 삽입 모드에 머무르는 것은 안티 패턴입니다. 손가락이 새 텍스트를 입력하지 않을 때는 일반 모드로 가는 습관을 들이세요.

텍스트를 삽입해야 할 때, 먼저 그 텍스트가 이미 존재하는지 자문해보세요. 존재한다면, 입력하는 대신 해당 텍스트를 복사하거나 이동해 보세요. 삽입 모드를 사용해야 한다면, 가능할 때마다 해당 텍스트를 자동 완성할 수 있는지 확인하세요. 가능하다면 같은 단어를 두 번 이상 입력하는 것을 피하세요.